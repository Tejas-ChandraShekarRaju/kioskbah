<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>{% block title %}buildAhome | ERP{% endblock %}</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- REMOVED Old Font Awesome 4 Link -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
        integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

        <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js "
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q "
        crossorigin="anonymous "></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js "
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl "
        crossorigin="anonymous "></script>

    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />

    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Add Font Awesome for icons (v6) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Add custom styles directly in head for simplicity, or link to a new CSS file -->
    <style>
        :root {
            --dark-bg: #1a1a1a; /* Dark background */
            --text-light: #f0f0f0; /* Light text */
            /* Removed Previous Teal Variables */
            /* --accent-teal-start: #00e0c6; */
            /* --accent-teal-end: #00a896; */
            /* New Darker Teal Variables */
            --accent-teal-start: #00A9A5; /* Darker Teal Start */
            --accent-teal-end: #007A76;   /* Darkest Teal End */
            --accent-primary: var(--accent-teal-start); /* Primary solid dark teal */
            --card-bg: #2c2c2c; /* Darker card background */
            --border-color: #444;
            --sidebar-width: 260px; /* <<< Ensure this variable is defined */
        }

        /* SVG Noise Filter Definition */
        /* We define this outside the body rule so it's reusable if needed */
        /* You won't see this directly, but it's used by the body background */
        /* Adds a subtle grain/noise texture */
        /* Base64 encoded SVG for cross-browser compatibility */
        /* You can generate different noise patterns here: https://www.svgbackgrounds.com/ */
        /* This is a simple turbulence filter */
       

        body {
            /* Keep the base gradient for fallback and color */
            background: linear-gradient(to bottom, #313131, #080808);
            min-height: 100vh; /* Ensure gradient covers full height */
            color: var(--text-light);
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; /* Set base font weight to Light */
            transition: background-color 0.5s ease; /* Transition might not be very noticeable now */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* --- General Button Styles --- */
        .btn {
            border-radius: 25px; /* Rounded buttons */
            transition: all 0.3s ease;
            font-weight: 500; /* Keep buttons slightly bolder than base text (was 600) */
            letter-spacing: 0.5px;
        }

        .btn-teal {
            background: linear-gradient(45deg, var(--accent-teal-start), var(--accent-teal-end));
            color: var(--dark-bg); /* Changed to dark background text */
            border: none;
            /* Adjust shadow color to match darker teal */
            box-shadow: 0 4px 10px rgba(0, 169, 165, 0.3);
        }

        .btn-teal:hover {
            color: var(--dark-bg); /* Keep dark background text on hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 169, 165, 0.5);
        }

        .btn-outline-teal {
            color: var(--accent-primary); /* Uses new darker teal */
            border: 2px solid var(--accent-primary); /* Uses new darker teal */
            background-color: transparent;
        }

        .btn-outline-teal:hover {
            background-color: var(--accent-primary); /* Uses new darker teal */
            color: var(--dark-bg); /* Changed to dark background text */
            box-shadow: 0 4px 10px rgba(0, 169, 165, 0.3); /* Uses new darker teal */
        }

        /* --- Welcome Screen --- */
        #welcomeScreen {
            min-height: 80vh; /* Take more vertical space */
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            animation: fadeIn 1s ease-out forwards;
        }

        #welcomeButton {
            font-size: 1rem;
            padding: 20px 50px;
            animation: pulse 2s infinite;
        }

        /* --- Navigation Options --- */
        #navigationOptions {
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards; /* Removed 0.2s delay */
        }

        #navigationOptions h3 {
            color: var(--accent-primary);
            margin-bottom: 3rem;
            font-weight: 400; /* Reduced from 500 */
        }

        .option-tab button {
            padding: 100px 15px !important; /* Adjusted padding */
            font-size: 1.4rem !important; /* Adjust font size */
            font-weight: 100; /* Reduced button font weight from 500 */
            height: 150px; /* Fixed height */
            display: flex;
            flex-direction: column; /* Stack icon and text vertically */
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-bottom: 20px;
            gap: 10px; /* Add space between icon and text */
            /* --- Style Overrides for Modern Look --- */
            border: none !important; /* Remove border */
            color: var(--text-light) !important; /* Set text color to white */
            background-color: rgba(255, 255, 255, 0.05) !important; /* Subtle background */
            transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth transitions */
        }

        .option-tab button:hover {
            background-color: rgba(0, 169, 165, 0.2) !important; /* Use darker accent teal with alpha */
            color: var(--text-light) !important; /* Keep text white on hover */
            box-shadow: none !important; /* Remove hover shadow */
            transform: translateY(-3px); /* Slight lift on hover */
        }

        /* Remove focus outline (flicker) */
        .option-tab button:focus {
            outline: none !important;
            box-shadow: none !important; /* Ensure no shadow on focus either */
        }

        /* --- Featured Plans Options --- */
        #featuredPlansOptions {
             opacity: 0;
            animation: fadeIn 0.8s ease-out forwards; /* Removed 0.2s delay */
        }
         #featuredPlansOptions h4 {
            color: var(--accent-primary);
            margin-bottom: 2rem;
            font-weight: 400; /* Reduced from 500 */
         }

        /* --- Form --- */
        #siteForm {
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards; /* Removed 0.2s delay */
        }

        #siteForm .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        #siteForm .card-title {
            color: var(--accent-primary);
            font-weight: 400; /* Reduced from 500 */
        }

        #siteForm .form-group {
            margin-bottom: 1.5rem;
        }

        #siteForm label {
            color: var(--text-light);
            font-weight: 300; /* Reduced from 400 (matches body) */
        }

        #siteForm .form-control,
        #siteForm .select2-container--default .select2-selection--single {
            background-color: var(--dark-bg); /* Darker input background */
            color: var(--text-light);
            border: 1px solid var(--border-color);
            border-radius: 5px;
        }
        #siteForm .select2-container--default .select2-selection--single .select2-selection__rendered {
             color: var(--text-light);
        }
        #siteForm .select2-container--default .select2-selection--single .select2-selection__arrow b {
            border-color: var(--text-light) transparent transparent transparent;
        }
        /* Style Select2 dropdown */
        .select2-dropdown {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-light);
        }
        .select2-results__option {
            color: var(--text-light);
        }
        .select2-results__option--highlighted {
            background-color: var(--accent-primary) !important;
            color: var(--dark-bg) !important;
        }
        .select2-search__field {
            background-color: var(--dark-bg) !important;
            color: var(--text-light) !important;
            border: 1px solid var(--border-color) !important;
        }


        /* --- Results Area --- */
        .back-button a {
            margin-bottom: 20px; /* Add space below back button */
        }

        .results-header-card {
            background-color: var(--card-bg);
            padding: 15px 25px;
            margin-bottom: 2rem;
            border-radius: 8px;
            border-top: 4px solid transparent;
            background-image: linear-gradient(var(--card-bg), var(--card-bg)),
                              linear-gradient(90deg, var(--accent-teal-start), var(--accent-teal-end));
            background-origin: border-box;
            background-clip: padding-box, border-box;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .results-header-card p {
            margin-bottom: 0 !important; /* Remove paragraph margin */
            display: flex; /* Align icon and text */
            align-items: center;
            font-weight: 300; /* Reduced from 400 (matches body) */
            /* Optional: color: var(--accent-primary); */ /* Make text teal if desired */
        }
        .results-header-card p i {
            color: var(--accent-primary);
            font-size: 1.1rem;
            margin-right: 10px;
        }
        .results-header-card .badge {
            margin: 2px; /* Add small margin around badges */
            font-weight: 400; /* Reduced from 500 */
            /* Removed mr-2 class dependency */
        }

        /* --- Card Flip Animation --- */
        .flip-card-container {
            perspective: 1000px; /* Perspective for 3D effect */
            margin-bottom: 30px; /* Space between cards */
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards; /* No delay here, keep as is */
        }

        .flip-card {
            position: relative;
            width: 100%;
            min-height: 450px; /* Adjust height as needed */
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Smooth flip */
            cursor: pointer;
        }

        .flip-card.flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Hide the back side during flip */
            display: flex;
            flex-direction: column;
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }

        .flip-card-back {
            transform: rotateY(180deg); /* Initially hide the back */
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            background-color: var(--card-bg); /* Ensure background for contrast */
        }

        .flip-card-front img {
            width: 100%;
            height: 350px; /* Fixed image height */
            object-fit: cover; /* Cover the area */
        }

        .flip-card-front .card-content {
            padding: 15px;
            text-align: center;
        }
         .flip-card-front .card-content h5 {
            color: var(--accent-primary);
            margin-bottom: 10px;
            font-weight: 400; /* Reduced from 500 */
         }
         .flip-card-front .card-content p {
            font-size: 0.9rem;
            color: #ccc; /* Lighter gray for details */
            font-weight: 300; /* Reduced from 400 (matches body) */
         }

        .flip-card-back h4 {
            color: var(--accent-primary);
            margin-bottom: 20px;
            font-weight: 400; /* Reduced from 500 */
        }

        .flip-card-back .btn { /* General button styling on card back */
             margin-top: 15px;
        }

        /* Style the "Back to Image" button specifically */
        .flip-button {
            border: none !important; /* Remove border */
            box-shadow: 0 3px 8px var(--shadow-color); /* Add shadow */
            color: var(--text-light); /* Set text color */
            background-color: rgba(255, 255, 255, 0.05); /* Optional: Subtle background */
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
        }

        .flip-button:hover {
            background-color: rgba(255, 255, 255, 0.1); /* Slightly lighter on hover */
            box-shadow: 0 4px 10px var(--shadow-color); /* Enhance shadow on hover */
            color: var(--text-light); /* Keep text color */
        }

        /* --- Full Screen Details --- */
        .full-screen-details {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.98); /* Darker overlay */
            z-index: 1050; /* Ensure it's above other elements */
            padding: 30px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0s 0.5s linear;
            /* display: flex; */ /* Let the .show class handle display */
            align-items: center;
            justify-content: center;
            display: none; /* Initially hidden */
        }

        .full-screen-details.show {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease, visibility 0s 0s linear;
            display: flex !important; /* Use flex and !important to ensure visibility */
        }

        .details-content {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            width: 90%;
            height: 90%;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Prevent content overflow */
            border: 1px solid var(--border-color);
            transform: scale(0.8);
            transition: transform 0.5s ease;
        }

        .full-screen-details.show .details-content {
             transform: scale(1);
        }

        .details-header {
            padding: 15px 25px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end; /* Move close button to the right */
        }

        .details-header .close-details {
            background: transparent;
            border: 1px solid var(--text-light);
            color: var(--text-light);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            padding: 0;
        }
        .details-header .close-details:hover {
            background: var(--text-light);
            color: var(--dark-bg);
        }

        .details-body {
            flex-grow: 1; /* Take remaining space */
            display: flex;
            overflow: hidden; /* Prevent inner scroll */
        }

        .details-nav {
            width: 200px; /* Fixed width for nav */
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            background-color: rgba(0,0,0,0.1); /* Slightly different bg for nav */
        }

        .details-nav .nav-link {
            color: var(--text-light);
            padding: 15px 25px; /* Increased vertical padding */
            margin-bottom: 5px; /* Increased spacing between links */
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
            font-weight: 300;
            font-size: 0.95rem;
        }

        .details-nav .nav-link i {
            width: 20px; /* Icon width */
        }

        .details-nav .nav-link:hover {
            background-color: rgba(0, 169, 165, 0.1); /* Darker Teal hover */
            color: var(--accent-primary); /* Uses new darker teal */
        }

        .details-nav .nav-link.active {
            border-left-color: var(--accent-primary) !important; /* Use the primary dark teal */
            background-color: rgba(0, 169, 165, 0.15) !important; /* Use rgba of primary dark teal */
            color: var(--accent-primary) !important; /* Use the primary dark teal for text/icon */
            font-weight: 400; /* Reduced from 500 */
        }

        .details-tab-content {
            flex-grow: 1;
            padding: 0; /* Remove padding */
            overflow: hidden; /* Hide overflow */
            position: relative; /* For absolute positioning inside */
        }

        .details-tab-pane {
            width: 100%;
            height: 100%;
            overflow: auto; /* Allow scrolling within the pane if needed */
            padding: 30px; /* Add padding inside the pane */
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards; /* Removed 0.3s delay */
        }

        .full-size-image-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative; /* Needed for overlay */
        }

        .full-size-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 5px;
        }

        .specs-overlay {
            position: absolute;
            bottom: 30px; /* Adjust position */
            right: 30px; /* Adjust position */
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end; /* Align items to the right */
        }

        .spec-item {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            backdrop-filter: blur(4px);
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transform: translateX(50px);
            animation: slideInFromRight 0.5s ease-out forwards;
        }
        /* Removed staggered animation delays */
        /* .spec-item:nth-child(1) { animation-delay: 0.5s; } */
        /* .spec-item:nth-child(2) { animation-delay: 0.6s; } */
        /* .spec-item:nth-child(3) { animation-delay: 0.7s; } */
        /* .spec-item:nth-child(4) { animation-delay: 0.8s; } */


        .spec-item strong {
            color: var(--accent-primary);
            margin-right: 8px;
            font-weight: 400; /* Reduced from 500 */
        }

        /* --- Fixed Back Button --- */
        .back-button-fixed {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000; /* Ensure it's above most content */
        }

        .back-button-fixed a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 55px; /* Size of the circle */
            height: 55px; /* Size of the circle */
            border-radius: 50%; /* Make it circular */
            background-color: rgba(44, 44, 44, 0.6); /* Semi-transparent dark background */
            backdrop-filter: blur(8px); /* Glassy blur effect */
            -webkit-backdrop-filter: blur(8px); /* Safari support */
            color: var(--text-light); /* Icon color */
            font-size: 1.2rem; /* Icon size */
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border */
            transition: all 0.3s ease;
        }

        .back-button-fixed a:hover {
            background-color: rgba(0, 169, 165, 0.7); /* Darker Accent color on hover */
            color: var(--text-light); /* Changed to white icon */
            transform: scale(1.05); /* Slight scale effect */
            box-shadow: 0 6px 15px rgba(0, 169, 165, 0.4); /* Darker Teal shadow */
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 169, 165, 0.3); }
            50% { transform: scale(1.03); box-shadow: 0 6px 20px rgba(0, 169, 165, 0.6); }
            100% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 169, 165, 0.3); }
        }

        @keyframes slideInFromRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* --- Utility --- */
        .fw-400 { font-weight: 400 !important; } /* New utility for normal weight */
        .fw-500 { font-weight: 500 !important; } /* Medium weight */
        .fw-600 { font-weight: 600 !important; } /* Semi-bold weight */
        .fw-700 { font-weight: 700 !important; } /* Bold weight */
        .text-teal { color: var(--accent-primary); }

        /* --- Welcome Screen Specific --- */
        #welcomeHeaderText {
            font-size: 3rem; /* Increased font size */
            font-weight: 100; /* Make it slightly bolder */
            color: var(--text-light); /* Ensure text color */
            margin-bottom: 1.5rem; /* Add space below the text */
            /* Animation is inherited from #welcomeScreen */
        }

        /* Hide original styles that might conflict */
        .bg-white, .bg-light, .shadow-sm, .border-0 {
            background-color: transparent !important;
            box-shadow: none !important;
            border: none !important;
        }
        .text-center { text-align: center; }
        .mb-4 { margin-bottom: 1.5rem !important; } /* Adjust spacing */
        .mt-5 { margin-top: 3rem !important; } /* Adjust spacing */
        .py-3 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
        .px-5 { padding-left: 3rem !important; padding-right: 3rem !important; }

        /* Adjust container padding */
        .container-fluid.pt-4 { padding-top: 2rem !important; }

        /* --- Sidebar Styles --- */
        #sidebar {
            position: fixed;   /* <<< Makes it fixed */
            left: 0;           /* <<< Aligns to the left */
            top: 0;            /* <<< Aligns to the top */
            width: var(--sidebar-width); /* <<< Sets the width */
            height: 100vh;     /* <<< Sets full height */
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            z-index: 1000;
            display: none;     /* <<< Hidden initially */
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        body.sidebar-visible #sidebar {
            display: block;    /* <<< Shows the sidebar */
        }

        #sidebar h5 {
            color: var(--accent-primary);
            margin-bottom: 3rem;
            font-weight: 400;
        }

        #sidebar .nav-link {
            color: var(--text-light);
            padding: 15px 25px; /* Increased vertical padding */
            margin-bottom: 5px; /* Increased spacing between links */
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
            font-weight: 300;
            font-size: 0.95rem;
        }
        #sidebar .nav-link i.fa-fw {
            width: 20px;
        }
        #sidebar .nav-link:hover {
            background-color: rgba(0, 169, 165, 0.1);
            color: var(--accent-primary);
        }
        #sidebar .nav-link.active {
            border-left-color: var(--accent-primary) !important;
            background-color: rgba(0, 169, 165, 0.15) !important;
            color: var(--accent-primary) !important;
            font-weight: 400;
        }
       
        /* --- Main Content Wrapper --- */
        #main-content-wrapper {
            transition: margin-left 0.3s ease; /* Smooth transition for the margin */
            /* No margin-left by default */
        }

        body.sidebar-visible #main-content-wrapper {
            margin-left: var(--sidebar-width); /* <<< Pushes content to the right */
        }

       
    </style>
</head>

<body>
    <div id="sidebar">
        <h5 class="text-teal pl-3 mt-4">Explore</h5>
        <nav class="nav flex-column">
            <a class="nav-link" href="#" id="sidebarViewFeatured">
                <i class="fa-solid fa-star fa-fw"></i> View Featured Plans
            </a>
            <a class="nav-link" href="#">
                <i class="fa-solid fa-house fa-fw"></i> Our Homes
            </a>
            <a class="nav-link" href="#">
                <i class="fa-solid fa-compass-drafting fa-fw"></i> Architectural Elements
            </a>
            <a class="nav-link" href="#">
                <i class="fa-solid fa-building fa-fw"></i> Structural Designs
            </a>
            <a class="nav-link" href="#">
                <i class="fa-solid fa-bolt fa-fw"></i> MEP Layouts
            </a>
            <a class="nav-link" href="#">
                <i class="fa-solid fa-helmet-safety fa-fw"></i> Construction Process
            </a>
             <a class="nav-link" href="#">
                <i class="fa-solid fa-comments fa-fw"></i> Customer Stories
            </a>
             <a class="nav-link" href="#">
                <i class="fa-solid fa-couch fa-fw"></i> Interior Design
            </a>
             <a class="nav-link" href="#">
                <i class="fa-solid fa-pen-ruler fa-fw"></i> Drawing & Design
            </a>
             <a class="nav-link" href="/check_floor_plan_and_elevation" id="sidebarHomeLink"> <!-- Link back to start -->
                <i class="fa-solid fa-arrow-left fa-fw"></i> Back to Start
            </a>
            <!-- Add other links similarly -->
        </nav>
    </div>

    <div id="main-content-wrapper">
        <div class="container-fluid pt-4 pb-0">
            <!-- Welcome Screen -->
             {% if not view_floor_plans %}
            <div id="welcomeScreen" class="row justify-content-center">
                <div class="col-md-8 text-center"> <!-- Wider column -->
                    <h2 id="welcomeHeaderText">Welcome to buildAhome</h2>
                    <button id="welcomeButton" class="btn btn-teal btn-lg shadow-sm text-white">
                        Touch to Explore
                    </button>
                </div>
            </div>
            {% endif %}
            <!-- Navigation Options -->
            <div id="navigationOptions" class="row justify-content-center mt-3 {% if view_floor_plans %}d-none{% else %}d-none{% endif %} py-5"> <!-- Initially hidden, kept padding -->
                <div class="col-md-10">
                    <h3 class="text-center mb-4 text-white">What would you like to explore?</h3>
                    <div class="row pt-4 justify-content-center"> <!-- Center buttons -->
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4" id="viewFeaturedPlans">
                                <i class="fa-solid fa-star fa-2x"></i> <!-- Updated icon -->
                                <span>View Featured Plans</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                 <i class="fa-solid fa-house fa-2x"></i> <!-- Updated icon -->
                                 <span>Our Homes</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-compass-drafting fa-2x"></i> <!-- Updated icon -->
                                <span>Architectural Elements</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-building fa-2x"></i> <!-- Alternative icon for Structural Designs -->
                                <span>Structural Designs</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-bolt fa-2x"></i> <!-- Alternative icon for MEP -->
                                <span>MEP Layouts and Designs</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-helmet-safety fa-2x"></i> <!-- Alternative icon for Construction -->
                                <span>Construction process</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-comments fa-2x"></i> <!-- Updated icon -->
                                <span>Customer Stories</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-couch fa-2x"></i> <!-- Updated icon -->
                                <span>Interior Design</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <div class="col-md-4 mb-3 option-tab">
                            <button class="btn btn-outline-teal w-100 p-4">
                                <i class="fa-solid fa-pen-ruler fa-2x"></i> <!-- Updated icon -->
                                <span>Drawing and Design</span> <!-- Wrapped text -->
                            </button>
                        </div>
                        <!-- Add other options similarly -->
                    </div>
                </div>
            </div>

            <!-- Featured Plans Options -->
            <div id="featuredPlansOptions" class="row justify-content-center mt-5 d-none py-5"> <!-- Kept padding -->
                <div class="col-md-8 text-center"> <!-- Wider column -->
                    <h4 class="mb-4 fw-600 text-white">Featured Plans</h4>
                    <div class="row justify-content-center">
                        <div class="col-md-5 option-tab"> <!-- Adjust column size -->
                            <button class="btn btn-outline-teal w-100 p-4" id="showFeaturedPlans">
                                 <i class="fa-solid fa-table-cells-large fa-2x mb-2"></i><br>Show All Featured Plans <!-- Updated icon -->
                            </button>
                        </div>
                        <div class="col-md-5 option-tab"> <!-- Adjust column size -->
                            <button class="btn btn-outline-teal w-100 p-4" id="searchFeaturedPlans">
                                 <i class="fa-solid fa-magnifying-glass fa-2x mb-2"></i><br>Search Featured Plans <!-- Updated icon -->
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form (initially hidden) -->
            <div id="siteForm" class="row justify-content-center mt-5 d-none py-4"> <!-- Kept padding -->
                <div class="col-md-8">
                    <div class="card"> <!-- Removed extra classes -->
                        <div class="card-body p-4"> <!-- Removed bg-white -->
                            <h3 class="card-title text-center mb-4 fw-600">Select Preferences</h3>
                            <form>
                                <div class="form-group row align-items-center"> <!-- Use row for alignment -->
                                    <label for="site_dimension" class="col-md-4 col-form-label text-md-right">Site Dimension</label> <!-- Right align label on medium+ -->
                                    <div class="col-md-8">
                                        <select name="site_dimension" id="site_dimension" class="form-control select2">
                                            <option value="">Select site dimension</option>
                                            <option value="30x40">30x40</option>
                                            <option value="30x50">30x50</option>
                                            <option value="40x50">40x50</option>
                                            <!-- Add other options -->
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row align-items-center">
                                    <label for="facing" class="col-md-4 col-form-label text-md-right">Facing</label>
                                    <div class="col-md-8">
                                        <select class="form-control select2" id="facing">
                                            <option value="">Select facing</option>
                                            <option value="north">North</option>
                                            <option value="south">South</option>
                                            <option value="east">East</option>
                                            <option value="west">West</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row align-items-center">
                                    <label for="floors" class="col-md-4 col-form-label text-md-right">Number of Floors</label>
                                    <div class="col-md-8">
                                        <select name="floors" id="floors" class="form-control select2">
                                            <option value="">Select number of floors</option>
                                            <option value="G+0.5">G+0.5</option>
                                            <option value="G+1">G+1</option>
                                            <option value="G+1.5">G+1.5</option>
                                            <option value="G+2">G+2</option>
                                            <!-- Add other options -->
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row align-items-center">
                                    <label for="useType" class="col-md-4 col-form-label text-md-right">Type of Use</label>
                                    <div class="col-md-8">
                                        <select class="form-control select2" id="useType">
                                            <option value="">Select type</option>
                                            <option value="residential">Residential</option>
                                            <option value="commercial">Commercial</option>
                                            <option value="mixed">Mixed Use</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="text-center mt-4"> <!-- Add margin top -->
                                    <button type="submit" class="btn btn-teal px-5 py-2">Submit</button> <!-- Use btn-teal -->
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if view_floor_plans %}
        <!-- Fixed Back Button Container -->
        <div class="back-button-fixed">
            <a href="/check_floor_plan_and_elevation" title="Back to Home"> <!-- Removed text, added title -->
                <i class="fa-solid fa-arrow-left"></i> <!-- Updated icon -->
            </a>
        </div>

        <div class="container-fluid pt-3 elevation-container"> <!-- Reduced top padding -->
            <!-- Results Header -->
            <div class="row">
                <div class="col-md-12">
                    <div class="results-header-card">
                         <p class="mb-0">
                            <i class="fa-solid fa-filter"></i> <!-- Updated icon -->
                            Showing plans for:
                         </p>
                            {% if request.args.get('site_dimension') %}
                                <span class="badge">Dim: {{ request.args.get('site_dimension') }}</span>
                            {% endif %}
                            {% if request.args.get('facing') %}
                                <span class="badge">Facing: {{ request.args.get('facing')|title }}</span>
                            {% endif %}
                            {% if request.args.get('floors') %}
                                <span class="badge">Floors: {{ request.args.get('floors') }}</span>
                            {% endif %}
                            {% if request.args.get('use_type') %}
                                <span class="badge">Type: {{ request.args.get('use_type')|title }}</span>
                            {% endif %}
                            {% if not request.args.get('site_dimension') and not request.args.get('facing') and not request.args.get('floors') and not request.args.get('use_type') %}
                                 <span class="badge">All Featured Plans</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>

            <div class="row">
                {% if no_floor_plans_and_elevations %}
                    <div class="col-md-12 my-5 text-center">
                         <div class="alert alert-warning bg-transparent border border-warning text-warning" role="alert"> <!-- Themed alert -->
                            <h4 class="alert-heading"><i class="fa-solid fa-triangle-exclamation mr-2"></i> No Plans Found</h4> <!-- Updated icon -->
                            <p>No floor plans and elevations match the selected preferences.</p>
                            <hr class="border-warning">
                            <p class="mb-0">Try adjusting your search criteria or view all featured plans.</p>
                        </div>
                    </div>
                {% endif %}

                {% for plan in floor_plans_and_elevations %}
                <div class="col-lg-3 col-md-4 col-sm-6"> <!-- Responsive columns -->
                    <div class="flip-card-container" style="animation-delay: {{ loop.index0 * 0.1 }}s;"> <!-- Staggered animation -->
                        <div class="flip-card" id="card{{ loop.index0 }}" data-plan-id="{{ loop.index0 }}">
                            <!-- Card Front -->
                            <div class="flip-card-front">
                                {% if plan[6] %}
                                    <img src="{{ plan[6] }}" alt="Elevation {{ loop.index }}">
                                {% else %}
                                    <div class="d-flex align-items-center justify-content-center" style="height: 350px; background-color: #333;">
                                        <span class="text-muted">No Elevation Image</span>
                                    </div>
                                {% endif %}
                                <div class="card-content">
                                    <h5 class="fw-600">Plan {{ loop.index }}</h5>
                                    <p>{{ plan[1] }} | {{ plan[2]|title }} Facing | {{ plan[4] }} Floors</p>
                                </div>
                            </div>
                            <!-- Card Back -->
                            <div class="flip-card-back">
                                 <h4 class="fw-600">Plan {{ loop.index }} Details</h4>
                                 <p><strong>Dimensions:</strong> {{ plan[1] }}</p>
                                 <p><strong>Facing:</strong> {{ plan[2]|title }}</p>
                                 <p><strong>Type:</strong> {{ plan[3]|title }}</p>
                                 <p><strong>Floors:</strong> {{ plan[4] }}</p>
                                 <button class="btn btn-teal view-details-button text-white p-3 px-5" data-plan-id="{{ loop.index0 }}">
                                     <i class="fa-solid fa-magnifying-glass-plus mr-2"></i> View Fullscreen <!-- Updated icon -->
                                 </button>
                                 <button class="btn btn-sm mt-3 flip-button p-3 px-5" data-target="card{{ loop.index0 }}">
                                     <i class="fa-solid fa-rotate-left mr-1"></i> Back to Image <!-- Updated icon -->
                                 </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Full Screen Details Section (Initially Hidden) -->
                <div class="full-screen-details" id="planDetails{{ loop.index0 }}">
                    <div class="details-content">
                        <!-- Header with close button -->
                        <div class="details-header">
                            <button class="btn close-details" data-plan-id="{{ loop.index0 }}">
                                <i class="fa-solid fa-xmark"></i> <!-- Updated icon -->
                            </button>
                        </div>

                        <!-- Body with Nav and Content -->
                        <div class="details-body">
                            <!-- Vertical Tabs Navigation -->
                            <nav class="details-nav nav flex-column nav-pills" role="tablist" aria-orientation="vertical">
                                 <a class="nav-link active" id="v-pills-elevation-tab-{{ loop.index0 }}" data-toggle="pill" href="#v-pills-elevation-{{ loop.index0 }}" role="tab" aria-controls="v-pills-elevation-{{ loop.index0 }}" aria-selected="true">
                                    <i class="fa-solid fa-building"></i> Elevation <!-- Updated icon -->
                                 </a>
                                 <a class="nav-link" id="v-pills-floorplan-tab-{{ loop.index0 }}" data-toggle="pill" href="#v-pills-floorplan-{{ loop.index0 }}" role="tab" aria-controls="v-pills-floorplan-{{ loop.index0 }}" aria-selected="false">
                                    <i class="fa-solid fa-map-location-dot"></i> Floor Plan <!-- Updated icon -->
                                 </a>
                                 <!-- Add more tabs if needed -->
                            </nav>

                            <!-- Tabs Content -->
                            <div class="details-tab-content tab-content">
                                <div class="details-tab-pane tab-pane fade show active" id="v-pills-elevation-{{ loop.index0 }}" role="tabpanel" aria-labelledby="v-pills-elevation-tab-{{ loop.index0 }}">
                                    <div class="full-size-image-container">
                                        {% if plan[6] %}
                                        <img src="{{ plan[6] }}" class="full-size-image" alt="Elevation Full">
                                        {% else %}
                                        <p class="text-muted">No Elevation Image Available</p>
                                        {% endif %}
                                        <div class="specs-overlay">
                                            <div class="spec-item"><strong>Dimensions:</strong> {{ plan[1] }}</div>
                                            <div class="spec-item"><strong>Facing:</strong> {{ plan[2]|title }}</div>
                                            <div class="spec-item"><strong>Floors:</strong> {{ plan[4] }}</div>
                                            <div class="spec-item"><strong>Type:</strong> {{ plan[3]|title }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="details-tab-pane tab-pane fade" id="v-pills-floorplan-{{ loop.index0 }}" role="tabpanel" aria-labelledby="v-pills-floorplan-tab-{{ loop.index0 }}">
                                     <div class="full-size-image-container">
                                         {% if plan[5] %}
                                        <img src="/{{ plan[5] }}" class="full-size-image" alt="Floor Plan Full">
                                         {% else %}
                                        <p class="text-muted">No Floor Plan Image Available</p>
                                        {% endif %}
                                        <div class="specs-overlay">
                                            <div class="spec-item"><strong>Dimensions:</strong> {{ plan[1] }}</div>
                                            <div class="spec-item"><strong>Facing:</strong> {{ plan[2]|title }}</div>
                                            <div class="spec-item"><strong>Floors:</strong> {{ plan[4] }}</div>
                                            <div class="spec-item"><strong>Type:</strong> {{ plan[3]|title }}</div>
                                        </div>
                                    </div>
                                </div>
                                 <!-- Add more tab panes if needed -->
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

    </div> <!-- End of #main-content-wrapper -->

    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.select2').select2({
                theme: "default", // Use default theme which we can style
                width: '100%' // Ensure it takes full width
            });

            // --- Screen Transitions ---
            const welcomeScreen = document.getElementById('welcomeScreen');
            const navigationOptions = document.getElementById('navigationOptions');
            const featuredPlansOptions = document.getElementById('featuredPlansOptions');
            const siteForm = document.getElementById('siteForm');
            const mainWrapper = document.getElementById('main-content-wrapper'); // Target the new wrapper

            // Welcome screen handler
            if (document.getElementById('welcomeButton')) {
                document.getElementById('welcomeButton').addEventListener('click', function() {
                    if (welcomeScreen) welcomeScreen.style.display = 'none'; // Hide welcome screen
                    if (navigationOptions) {
                        navigationOptions.classList.remove('d-none'); // Show navigation options
                        navigationOptions.style.opacity = 1;
                    }
                    document.body.classList.add('sidebar-visible'); // Show sidebar
                });
            } else if (navigationOptions && !document.querySelector('.view-floor-plans-active')) {
                 // If welcome screen is skipped show nav directly
                 if (navigationOptions) navigationOptions.classList.remove('d-none');
                 document.body.classList.add('sidebar-visible'); // Show sidebar if welcome is skipped
            }

            // Featured plans handler (Button within the main nav options)
            if (document.getElementById('viewFeaturedPlans')) {
                document.getElementById('viewFeaturedPlans').addEventListener('click', function() {
                    if (navigationOptions) navigationOptions.classList.add('d-none'); // Hide nav options
                    if (featuredPlansOptions) {
                        featuredPlansOptions.classList.remove('d-none'); // Show featured options
                        featuredPlansOptions.style.opacity = 1;
                    }
                    // Sidebar should already be visible here
                });
            }
             // Sidebar link handler (Example for View Featured)
             if (document.getElementById('sidebarViewFeatured')) {
                document.getElementById('sidebarViewFeatured').addEventListener('click', function(e) {
                    e.preventDefault(); // Prevent default link behavior
                     // Hide other sections if necessary
                    if (siteForm) siteForm.classList.add('d-none');
                    if (navigationOptions) navigationOptions.classList.add('d-none');
                    // Show the target section
                    if (featuredPlansOptions) {
                        featuredPlansOptions.classList.remove('d-none');
                        featuredPlansOptions.style.opacity = 1;
                    }
                     // Add 'active' class to this link, remove from others (optional)
                     $('#sidebar .nav-link').removeClass('active');
                     $(this).addClass('active');
                     // hide container-fluid
                });
             }


            // Show featured plans handler (Button within featured plans options)
            if (document.getElementById('showFeaturedPlans')) {
                document.getElementById('showFeaturedPlans').addEventListener('click', function() {
                    // Add a class to body or container to indicate results are shown
                    // document.body.classList.add('view-floor-plans-active'); // Already added by load logic
                    window.location.href = `${window.location.pathname}?view=featured`;
                    // Sidebar should remain visible after page load
                });
            }

            // Search featured plans handler (Button within featured plans options)
            if (document.getElementById('searchFeaturedPlans')) {
                document.getElementById('searchFeaturedPlans').addEventListener('click', function() {
                    if (featuredPlansOptions) featuredPlansOptions.classList.add('d-none'); // Hide featured options
                    if (siteForm) {
                        siteForm.classList.remove('d-none'); // Show form
                        siteForm.style.opacity = 1;
                    }
                     // Sidebar should already be visible
                });
            }

            // --- Form Submission ---
            const form = document.querySelector('#siteForm form');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    // ... existing form data collection ...

                    // Construct URL
                    const queryParams = new URLSearchParams();
                    if (siteDimension) queryParams.set('site_dimension', siteDimension);
                    if (facing) queryParams.set('facing', facing);
                    if (floors) queryParams.set('floors', floors);
                    if (useType) queryParams.set('use_type', useType);

                     // document.body.classList.add('view-floor-plans-active'); // Already added by load logic
                    // Redirect - sidebar should remain visible after page load
                    window.location.href = `${window.location.pathname}?${queryParams.toString()}`;
                });
            }

             // --- Card Flip ---
             // Add click listener to the FRONT of the card to flip it
             $('.flip-card-front').on('click', function() {
                 $(this).closest('.flip-card').addClass('flipped');
             });

             // Add click listener to the "Back to Image" button to flip it back
             $('.flip-button').on('click', function() {
                 // Find the parent flip-card container and remove the 'flipped' class
                 $(this).closest('.flip-card').removeClass('flipped');
             });

             // --- Full Screen Details ---
             // Add click listener for the "View Fullscreen" button on the card back
             $('.view-details-button').on('click', function(e) {
                 e.stopPropagation(); // Prevent the click from bubbling up to other elements if needed
                 const planId = $(this).data('plan-id');
                 const detailsDiv = $(`#planDetails${planId}`);

                 if (detailsDiv.length) {
                     detailsDiv.addClass('show');
                     // Optionally hide the main content wrapper for a cleaner look
                    //  if (mainWrapper) $(mainWrapper).hide();
                     // Optionally hide the fixed back button if it overlaps
                     $('.back-button-fixed').hide();
                 }
             });

             // Add click listener for the close button inside the full-screen details
             $('.close-details').on('click', function() {
                 const planId = $(this).data('plan-id');
                 const detailsDiv = $(`#planDetails${planId}`);

                 if (detailsDiv.length) {
                     detailsDiv.removeClass('show');
                     // Restore the main content wrapper after a short delay for the transition
                     setTimeout(() => {
                         if (mainWrapper) $(mainWrapper).show();
                          // Restore the fixed back button if it was hidden
                          $('.back-button-fixed').show();
                     }, 500); // Match the transition duration in CSS if possible
                 }
             });


            // Add class if plans are being viewed on load OR if welcome screen is absent
            {% if view_floor_plans %}
                document.body.classList.add('sidebar-visible'); // Show sidebar
                document.body.classList.add('view-floor-plans-active'); // Keep this for results logic
                // Ensure initial screens are hidden if results are shown
                if (welcomeScreen) welcomeScreen.style.display = 'none';
                if (navigationOptions) navigationOptions.classList.add('d-none');
                if (featuredPlansOptions) featuredPlansOptions.classList.add('d-none');
                if (siteForm) siteForm.classList.add('d-none');
            {% else %}
                 // If not viewing plans, check if welcome screen exists
                 if(welcomeScreen) {
                    // Welcome screen exists, sidebar hidden initially
                    document.body.classList.remove('sidebar-visible');
                 } else {
                    // No welcome screen (maybe direct link or error), show sidebar and nav options
                    document.body.classList.add('sidebar-visible');
                    if (navigationOptions) {
                        navigationOptions.classList.remove('d-none');
                    }
                 }
            {% endif %}

            // --- Sidebar Link Click Handling (Example - needs expansion) ---
            // You'll need to add logic here to show/hide the correct sections
            // within #main-content-wrapper when sidebar links are clicked,
            // similar to how the original button clicks worked.
            // For example, clicking "Search Featured Plans" in the sidebar should
            // hide #navigationOptions, #featuredPlansOptions and show #siteForm.
            // You might want to give IDs to the sidebar links to target them easily.

            // Example: Make sidebar link trigger the same as original button
             if (document.getElementById('sidebarViewFeatured') && document.getElementById('viewFeaturedPlans')) {
                 document.getElementById('sidebarViewFeatured').addEventListener('click', (e) => {
                     e.preventDefault();
                     document.getElementById('viewFeaturedPlans').click(); // Simulate click on original button
                     // Add active class handling
                     $('#sidebar .nav-link').removeClass('active');
                     $(e.target).closest('a').addClass('active');
                     $('.elevation-container').hide();
                 });
             }
             // Add similar handlers for other sidebar links corresponding to original buttons


        });
    </script>
</body>

</html>
